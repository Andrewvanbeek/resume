<html>
<head>
  <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/js/andrew.js"></script>
  <script type="text/javascript" src="js/phaser.min.js"></script>
</head>
<body>
test
<h1> Test</h1>
  <br><br><br><br>
<script type="text/javascript">

var game = new Phaser.Game(1500, 400, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render });

function preload() {
    game.load.image('sky', 'sky.png');
    game.load.image('star', 'star.png');
    game.load.image('since', 'backgroundone.png')
    game.load.spritesheet('dude', 'dude.png', 32, 48);
    game.load.image('sincesecond', 'backgroundtwo.png')
    game.load.image('ground', 'platform.png');
    game.load.image('rubysprite', 'rubysprite.png')
    game.load.image('hit', 'hit.png')
    game.load.image('blocka', 'blocka.png')
    game.load.image('swiftblock', 'swiftblock.png')
    game.load.image('blank', 'blank.png')
    game.load.image('data', 'Data.png')
}

var card;
var cursors;

function create() {

    game.world.setBounds(0, 0, 10000, 350);
    game.physics.startSystem(Phaser.Physics.ARCADE);
    resume = game.add.sprite(0, 0, 'since')
    resume2 = game.add.sprite(4400, 0, 'sincesecond')
    platforms = game.add.group();
    platforms.enableBody = true;

     emitter = game.add.emitter(4800, 120, 10000, true, true);
    emitter.makeParticles('data');
    emitter.width = 2000
    emitter.minParticleScale = 0.1;
   emitter.maxParticleScale = 0.2;
    emitter.minParticleSpeed.set(200, 200);
    emitter.maxParticleSpeed.set(200, 200);

    emitter.setRotation(0, 0);
    emitter.gravity = 0;

    game.physics.arcade.enable(emitter)
     emitter.start(false, 2000, 500);
     var ground = platforms.create(0, game.world.height - 64, 'ground');
    ground.scale.setTo(5000, 2);
    ground.body.immovable = true;
     player = game.add.sprite(32, game.world.height - 150, 'dude');
    var ledge = platforms.create(750, 140, 'ground');
    ledge.scale.setTo(0.75, 0.01)
    ledge2 = platforms.create(370, 150, 'ground');
    ledge2.scale.setTo(0.55, 0.001)
    ledge.enableBody = true
    ledge.body.immovable = true
    ledge2.enableBody = true
    ledge2.body.immovable = true
    ledge3 = platforms.create(370, 70, 'ground');
    ledge3.scale.setTo(0.55, 0.001)
    ledge3.enableBody = true
    ledge3.body.immovable = true
    ledge4 = platforms.create(840, 60, 'ground')
    ledge4.scale.setTo(0.35, 0.01)
    ledge4.enableBody = true
    ledge4.body.immovable = true
    ledge5 = platforms.create(1130, 85, 'ground')
    ledge5.scale.setTo(1, 0.001)
    ledge5.enableBody = true
    ledge5.body.immovable = true
    hit = game.add.sprite(1580, 0, 'hit')
    hit.scale.setTo(0.675, 0.675)
    ledge6 = platforms.create(2285, 0, 'ground')
    ledge6.scale.setTo(0.45, 3.5)
    ledge6.enableBody = true
    ledge6.body.immovable = true
    ledge7 = platforms.create(2285, 225, 'blocka')
    ledge7.scale.setTo(0.45, 3.5)
    ledge7.enableBody = true
    ledge7.body.immovable = true

    ledge8 = platforms.create(2285, 225, 'blocka')
    ledge8.scale.setTo(3.45, 0.01)
    ledge8.enableBody = true
    ledge8.body.immovable = true

    ledge9 = platforms.create(2285, 100, 'ground')
    ledge9.scale.setTo(4.34, 0.01)
    ledge9.enableBody = true
    ledge9.body.immovable = true
    swiftblock = game.add.sprite(2300, 120, 'swiftblock')
    swiftblock.scale.setTo(0.21, 0.21)
    game.physics.arcade.enable(swiftblock);
    swiftblock.body.gravity.y = 2;
    swiftblock.body.collideWorldBounds = true
    game.physics.arcade.enable(hit)
    game.physics.arcade.enable(player);
    player.body.bounce.y = 0.1;
    player.body.gravity.y = 200;
    player.body.collideWorldBounds = true;
    player.animations.add('left', [0, 1, 2, 3], 10, true);
    player.animations.add('right', [5, 6, 7, 8], 10, true);
    game.camera.follow(player);

    cursors = game.input.keyboard.createCursorKeys();
    line = platforms.create(805, 80, 'ground');
    line.scale.setTo(0.5, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(780, 110, 'ground');
    line.scale.setTo(0.65, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(770, 160, 'ground');
    line.scale.setTo(0.7, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(810, 190, 'ground');
    line.scale.setTo(0.5, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(835, 220, 'ground');
    line.scale.setTo(0.4, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(865, 250, 'ground');
    line.scale.setTo(0.25, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true
    line = platforms.create(890, 280, 'ground');
    line.scale.setTo(0.1, 0.001)
    line.body.collideWorldBounds = true
    line.body.immovable = true



}




function update() {
    var fireBallhit = game.physics.arcade.collide(player, emitter, particleBurst, null, this)


    var hitPlatform = game.physics.arcade.collide(player, platforms);
    var hitblock = game.physics.arcade.collide(player, hit)
    var blockTouchDown = game.physics.arcade.collide(swiftblock, platforms, blocker, null, this)
    var blockpush = game.physics.arcade.collide(player, swiftblock, blockpush, null, this)
    var lineblock = game.physics.arcade.collide(player, platforms);


 player.body.velocity.x = 0;
   if (swiftblock.body.x > 4000) {
            swiftblock.destroy()
        }


     if(cursors.left.isDown){
        player.body.velocity.x = -550;
        player.animations.play('left');
     }
     else if (cursors.right.isDown)
    {
        //  Move to the right
        player.body.velocity.x = 550;

        player.animations.play('right');
    }
     else
    {
        //  Stand still
        player.animations.stop();

        player.frame = 4;
    }
    if (cursors.up.isDown && player.body.touching.down && hitPlatform)
    {
        player.body.velocity.y = -350;
    }

    function blocker(obj1, obj2) {
    swiftblock.body.gravity = 0
    swiftblock.body.immovable = true
}

    function blockpush(obj1, obj2) {
        game.physics.arcade.enable(swiftblock)
        swiftblock.body.gravity.y = 200
        if (cursors.right.isDown){
            game.physics.arcade.collide(player, swiftblock)
            swiftblock.body.immovable = false
            swiftblock.body.velocity.x = 200
        }

    }

    function particleBurst(obj1, obj2) {


}



}

function render() {
game.debug.geom(line);
    // game.debug.cameraInfo(game.camera, 500, 32);
    // game.debug.spriteCoords(card, 32, 32);

}


</script>


</body>
</html>

